<div class="container">
  <div class="row">
    
      <div class="col-md-3">
        <div id="sidebar_menu" class="tree" role="complementary"></div>
      </div>
      <div id="content" class="col-md-9">
    
        <h1 style="margin-top: 0px;">Installing and configuring</h1>
        <p>Find here how to install and configure the Cloudify 2 driver.</p>

<h2 id="download">Download</h2>
<p>First step of course is to download the plugin.</p>

<ul>
  <li><a href="https://fastconnect.org/maven/service/local/artifact/maven/redirect?r=opensource&amp;g=alien4cloud&amp;a=alien4cloud-cloudify2-provider&amp;v=LATEST&amp;p=zip" class="btn btn-success download-button navbar-btn">last stable version</a> works with the latest stable alien version.</li>
  <li><a href="https://fastconnect.org/maven/service/local/artifact/maven/redirect?r=opensource-snapshot&amp;g=alien4cloud&amp;a=alien4cloud-cloudify2-provider&amp;v=LATEST&amp;p=zip" class="btn btn-warning download-button navbar-btn">last build version</a> works with the latest build alien version.</li>
</ul>

<h2 id="install">Install</h2>
<p>The driver is packaged as an ALIEN plugin, install it in <code>admin &gt; plugins</code> of your running instance of ALIEN.</p>

<h2 id="configure">Configure</h2>
<p>You need to create a cloud and configure it.</p>

<h3 id="creating-the-cloud">Creating the cloud</h3>
<ol>
  <li>Login as an admin, and create a cloud: <code>admin &gt; clouds &gt; New Cloud</code>.</li>
  <li>As <code>PaaS provider</code> for this cloud, make sure to select <strong><em>Cloudify 2 PaaS Provider</em></strong> from the list. Validate</li>
</ol>

<h3 id="naming-policy">Naming policy</h3>

<p>You may need to define a specific naming policy for your application in the configuration tab :</p>

<p><a href="../../images/cloudify2_driver/config_cloud_naming_policy.png" title="Naming policy"><img src="../../images/cloudify2_driver/config_cloud_naming_policy.png" alt="Naming policy" title="Naming policy" /></a><br /></p>

<p>To compose your own application naming policy, you can use the following entities and properties :</p>

<ul>
  <li><strong>environment</strong> : the environment link to the deployment
    <ul>
      <li><em>id</em></li>
      <li><em>name</em></li>
      <li><em>applicationId</em></li>
      <li><em>cloudId</em></li>
      <li><em>environmentType</em> : <code>OTHER, DEVELOPMENT, INTEGRATION_TESTS, USER_ACCEPTANCE_TESTS, PRE_PRODUCTION, PRODUCTION</code></li>
      <li><em>currentVersionId</em></li>
    </ul>
  </li>
  <li><strong>application</strong> : deployed application
    <ul>
      <li><em>id</em></li>
      <li><em>name</em></li>
      <li><em>creationDate</em></li>
      <li><em>lastUpdateDate</em></li>
    </ul>
  </li>
  <li><strong>metaProperties</strong> : the administrator can define meta properties linked to an application</li>
  <li><strong>time</strong> : current date at format <code>yyyyMMddHHmm</code></li>
</ul>

<p>The default naming policy setting for any cloud is : <code>environment.name + application.name</code></p>

<div class="note warning">
<p>The administrator is responsible for the naming policy consistency. In cloudify, you can’t have two deployments with the same name.</p>
</div>

<p>The main pattern to define a naming policy is to use <code>+</code> to concat different properties or text, for examples :</p>

<ul>
  <li><code>environment.name + application.name + time</code></li>
  <li><code>application.id + environment.environmentType + '-US_ZONE'</code></li>
  <li><code>time + '__' + application.creationDate</code></li>
  <li><code>'MY_APP' + '-WORDPRESS-' + time</code></li>
  <li><code>metaProperties['PROPERTY_NAME'] + '-' + time</code></li>
</ul>

<div class="note warning">
<p>Any empty property used in the policy expression will cause a deployment failure</p>
</div>

<div class="note info">
<p><strong>Advanced use</strong> : the policy expression is based on <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html" target="_blank">SpEL</a> (<em>Spring Expression Language</em>) and you could use its capabilities if you are familiar with it.
<strong>Note</strong> : do not use the <code>#</code></p>
</div>

<h3 id="configuring-the-cloud">Configuring the cloud</h3>
<p>On the cloud list, select and click on the newly created cloud, then go to the <code>configuration</code> tab.</p>

<ol>
  <li>
    <p><strong><u>Connection Configuration</u></strong>: Remember the REST API URL you were told to note when bootstrapping your cloud with Cloudify, here is the place you’ll need it. Fill the “Cloudify URL” with it, and eventually provide a login (username / password) for the access.<br /><br />
<a href="../../images/cloudify2_driver/config_cloud_cloudifyConUrl.png" title="Connection configuration"><img src="../../images/cloudify2_driver/config_cloud_cloudifyConUrl.png" alt="Connection configuration" title="Connection configuration" /></a><br />
You must save the configuration, switch back to the <code>Details</code> tab and enable the cloud by clicking on the <code>Enable cloud</code> button. Then you should go to <code>Image</code> tab to configure your cloud’s images.</p>
  </li>
  <li>
    <p><strong><u>Images Configuration</u></strong>: Here you have to create/configure your cloud’s images. Map your cloud’s created image to the correct identifier on the IaaS (openstack, amazon …)<br /><br />
<a href="../../images/cloudify2_driver/config_cloud_cloudifyImage.png" title="Images"><img src="../../images/cloudify2_driver/config_cloud_cloudifyImage.png" alt="Images configuration" title="Images" /></a><br />
You should now go to <code>Flavor</code> tab to configure your cloud’s flavors.</p>
  </li>
  <li>
    <p><strong><u>Flavors Configuration</u></strong>: Here you have to create/configure your cloud’s flavors. Map your cloud’s created flavor to the correct identifier on the IaaS (openstack, amazon …)<br /><br />
<a href="../../images/cloudify2_driver/config_cloud_cloudifyFlavor.png" title="Flavors"><img src="../../images/cloudify2_driver/config_cloud_cloudifyFlavor.png" alt="Flavors configuration" title="Flavors" /></a><br />
You should now go to <code>Templates</code> tab to see all your cloud’s compute templates.</p>
  </li>
  <li>
    <p><strong><u>Templates Configuration</u></strong>: Here you can review available templates and disable those that you do not want to use.<br /><br />
<a href="../../images/cloudify2_driver/config_cloud_cloudifyTemplate.png" title="Templates"><img src="../../images/cloudify2_driver/config_cloud_cloudifyTemplate.png" alt="Templates configuration" title="Templates" /></a><br />
You should now go to <code>Network</code> tab to configure your cloud’s networks.</p>
  </li>
  <li>
    <p><strong><u>Networks Configuration</u></strong>: Here you have to create/configure your cloud’s network templates. Map your cloud’s created network to the correct identifier of Cloudify 2 (which is defined in the cloudify 2 cloud’s configuration)<br /><br />
<a href="../../images/cloudify2_driver/config_cloud_cloudifyNetwork.png" title="Networks"><img src="../../images/cloudify2_driver/config_cloud_cloudifyNetwork.png" alt="Networks configuration" title="Networks" /></a><br />
You must enter the PaaS Resource Id for all created network template or it will not be usable.<br />
The notion of external network is not necessary for cloudify 2, your cloudify 2 should be configured to auto-associate floating IP, so please set it to false.<br />
You should now go to <code>Block Storages</code> tab to configure your cloud’s block storages.</p>
  </li>
  <li>
    <p><strong><u>Block Storages Configuration</u></strong>: Here you have to create/configure your cloud’s block storage templates. Map your cloud’s created block storage to the correct identifier of Cloudify 2 (which is defined in the cloudify 2 cloud’s configuration)<br /><br />
<a href="../../images/cloudify2_driver/config_cloud_cloudifyBlockStorage.png" title="Block Storages"><img src="../../images/cloudify2_driver/config_cloud_cloudifyBlockStorage.png" alt="Block Storages configuration" title="Block Storages" /></a><br />
You must enter the PaaS Resource Id for all created block storage template or it will not be usable.<br />
<strong>Congratulation!!</strong> You’ve finished to configure your cloudify2-based cloud. You can now begin to deploy your application with this cloud.</p>
  </li>
</ol>


      </div>
    </div>
  </div>
</div><!-- /container -->
<script>
var hash = location.hash.replace( /^#/, '' );
if(hash && hash!== null && hash.match(/html$/)) {
} else {
  var newLocation = location.protocol+"//"+location.host+"#"+location.pathname;
  location.replace(newLocation);
}
</script>
<script type="text/javascript" src="/js/post-layout.js"></script>
<script>
$(document).ready(function () {
  makeSideBar('DOCUMENTATION', 'cloudify_2_install');
});
</script>

<script>
$("div[data-gist]").gist();
</script>
