<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8">
    <title>Stack Application Topology</title>
    <meta property="st:info" content="section:'Documentation'"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../../css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/docs.css">
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/syntax.css">
    <link rel="stylesheet" href="../../css/note.css">
</head>

  <body>
    <script type="text/javascript">
      var tocheaders = {};
      var tocheadersz = {};
    </script>
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../js/jquery.fancybox.pack.js"></script>

<script type="text/javascript" src="../../js/jquery.ba-hashchange.min.js"></script>

    <div id="wrapper">
      <div id="header">
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">
        <img src="../../images/cloudalien.png" style="height:21px;" class="pull-left"> ALIEN 4 Cloud
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
        <li>
          <a href="../../community/">Community</a>
        </li>
        <li>
          <a href="../../documentation/">Documentation</a>
        </li>
        <li>
          <a href="../../developer_guide/">Contribute</a>
        </li>
        <li>
          <a href="../../roadmap/">Roadmap</a>
        </li>
        <li>
          <a href="../../release_notes/">Release notes</a>
        </li>
        <li>
          <a id="git-icon" href="https://github.com/alien4cloud/alien4cloud.github.io" target="_blank" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Documentation's GitHub!" data-original-title="Documentation's GitHub!">
          <i class="fa fa-code-fork fa-lg fa-rotate-90"></i>
          </a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <button type="button" onclick="location.href='https://fastconnect.org/maven/service/local/artifact/maven/redirect?r=opensource-snapshot&g=alien4cloud&a=alien4cloud-ui&v=LATEST&p=war&c=standalone'" class="btn btn-warning navbar-btn download-button"><i class="fa fa-download"></i> latest build</button>
        </li>
        <li>
          <button type="button" onclick="location.href='https://fastconnect.org/maven/service/local/artifact/maven/redirect?r=opensource&g=alien4cloud&a=alien4cloud-ui&v=LATEST&p=war&c=standalone'" class="btn btn-success navbar-btn download-button"><i class="fa fa-download"></i> stable</button>
        </li>
      </ul>
    </div>
  </div>
</div>

<script>
$('[target=_blank]').append(" <i class=\"icon-external-link\" style=\"font-size:10px\"></i>");

$('#git-icon').tooltip();
</script>

      </div>

      <div id="content-parent" class="content">
        <div class="container">
          <div class="row">
            <div id="breadcrumbs"></div>
            
              <div class="col-md-3">
                <div id="sidebar_menu" class="well tree" role="complementary">
</div>

<script type="text/javascript" src="../../js/sidebar.js"></script>

<script>
$(document).ready(function () {
  makeSideBar('DOCUMENTATION', 'lamp_stack_application');
  createBreadcrumbs('DOCUMENTATION', 'Documentation');
});
</script>

              </div>
              <div id="content" class="col-md-9">
            
                <h1 style="margin-top: 0px;">Stack Application Topology</h1>
                <p>On this page we will create our topology representing the LAMP stack. Follow instructions step by step and at the end you will have your stack up and running.</p>

<p>To be more concret we will use the <a href="../getting_started/lamp_stack_website.html">WebSite</a> component to install a real and well known CMS : <a href="https://wordpress.com" target="_blank">Wordpress</a></p>

<h1 id="prerequisites">Prerequisites</h1>

<ol>
  <li>Get, checkout, download all components listed in the <a href="../getting_started/lamp_stack.html">main page</a> of this tutorial</li>
  <li>Import all components in <strong>A4C</strong>
    <ul>
      <li>We assume that you are running the A4C you have downloaded in <a href="../getting_started/getting_started.html">standalone version</a>  </li>
      <li>Once you are logged as <em>admin</em>, you will have the menu on top, select then the <strong>Components</strong> item</li>
      <li>You can also see here how to <a href="../tosca_ref/calm_components_repo_uploadarchive.html">upload your component</a>  </li>
    </ul>
  </li>
  <li>Configure your cloud plugin <a href="../cloudify2_driver/index.html">PaaS Provider</a></li>
  <li>Then compose you topology following the next steps</li>
</ol>

<div class="note info">
<p>Point 2 : on each page on the right top corner you have a button with a question mark [?]. Click to start a <em>tour</em> to explain what you can do in the current page and how to do it.</p>
</div>

<h1 id="create-the-topology-for-the-wordpress-application">Create the topology for the Wordpress application</h1>

<p>We have explained all components of our LAMP stack. Now, we will use these components to deploy a Wordpress on a cloud. To begin just for on <em>Applications</em> menu and create a <strong>New application</strong> then go on the application sub-menu <strong>Topology</strong>.</p>

<p>You are now ready to compose you application. Let’s do it !</p>

<h2 id="step-1--the-compute">Step 1 : The Compute</h2>

<p>In this step, drag and drop a <strong>Compute</strong> into the topology design view. You need to specify two properties for this compute :</p>

<ul>
  <li>os_arch : <strong>x86_64</strong></li>
  <li>os_type : <strong>linux</strong></li>
</ul>

<p><a href="../../images/getting_started/wordpress-topology-step-1.png"><img src="../../images/getting_started/wordpress-topology-step-1.png" alt="Compute" /></a></p>

<h2 id="step-2--the-blockstorage">Step 2 : The BlockStorage</h2>

<p>Now, drag and drop a <strong>BlockStorage</strong> into the view. Select it by click and then attach it the <strong>Compute</strong> in the right <em>Properties</em> tab. Make sure to select the relation <em>attachment</em> with 1..1 constraint.</p>

<p>In these properties tab view, set also the <em>size</em> value to 1 (GB by default).</p>

<p><a href="../../images/getting_started/wordpress-topology-step-2.png"><img src="../../images/getting_started/wordpress-topology-step-2.png" alt="Compute, BlockStorage" /></a></p>

<h2 id="step-3--apache-mysql-php">Step 3 : Apache, MySQL, PHP</h2>

<p>Then, drag and drop a <strong>MySQL</strong>, a <strong>PHP</strong> and an <strong>Apache</strong> onto the <strong>Compute</strong> existing node. For each new node droped onto <strong>Compute</strong> you will have to decide a target for the <em>HostedOn</em> relationship (generally just check the relationship name and click <em>Finish</em>). Change the default value of <strong>MySQL</strong> or <strong>Apache</strong> if you want a custom install.</p>

<p>For the <strong>PHP</strong> node, check the <em>two options</em> to install the PHP module in <em>Apache</em> and the PHP module for <em>MySQL</em>.</p>

<p><a href="../../images/getting_started/wordpress-topology-step-3.png"><img src="../../images/getting_started/wordpress-topology-step-3.png" alt="Compute, BlockStorage, Apache, MySQL, PHP" /></a></p>

<h2 id="step-4--the-website">Step 4 : The Website</h2>

<p>The last component to add is the <strong>WebSite</strong>. Add it to the view and create <em>WebSiteHostedOn</em> relationship between <strong>Website</strong> and <strong>Apache</strong>.</p>

<p>On the property, set the URL of the last zip of Wordpress.</p>

<p><a href="../../images/getting_started/wordpress-topology-step-4.png"><img src="../../images/getting_started/wordpress-topology-step-4.png" alt="Compute, BlockStorage, Apache, MySQL, PHP, Website" /></a></p>

<h1 id="deployment">Deployment</h1>

<p>Now we can deploy our topology into the cloud we’ve defined in prerequisite. The <em>Deploy</em> button is accessible in the Application sub-menu <em>Deployments</em>.</p>

<p>To configure your <em>Wordpress</em> at your first run, open your web browser and go to <strong>IP_SERVER/wordpress</strong>.</p>

<div class="note info">
<p>To configure your <em>Wordpress</em>, specifically for the <strong>MySQL</strong> settings, be sure you enter the settings you defined in your <em>MySQL</em> configuration.</p>
</div>

<div class="note">
<p>To check you running application, go on application <em>Runtime</em> sub-menu an select the node you want. In the <em>Details</em> tab automatically selected, you just need to select the instance line you want to have more details like <em>ip_address</em> and <em>public_ip_address</em> an try you application.</p>

<p>Here we can select the <em>Compute</em> node and get the <em>public IP</em> to run Wordpress for the first time and later.</p>
</div>

              </div>
            </div>
          </div><!-- /container -->
        </div>
      </div>
      <div class="push"></div>
    </div>
    <div id="footer">
  <div class="container">
    <p style="text-align:center;margin: 20px 0" class="text-muted credit">&copy; FastConnect SAS, 2014. Powered by <a href="http://jekyllrb.com/">Jekyll</a>.</p>
  </div>
</div>

    <script type="text/javascript" src="../../js/post-layout.js"></script>
  </body>
</html>
